(function(){function a(a){return a.target}function b(a){return a.source}function c(a,b){for(var c=a.coordinates[0],d=0,e=c.length;d<e;d++)b.apply(null,c[d])}function d(a,b){b.apply(null,a.coordinates)}function e(a,b){for(var c=a.coordinates,d=0,e=c.length;d<e;d++)for(var f=c[d][0],g=0,h=f.length;g<h;g++)b.apply(null,f[g])}function f(a,b){for(var c=a.coordinates,d=0,e=c.length;d<e;d++)for(var f=c[d],g=0,h=f.length;g<h;g++)b.apply(null,f[g])}function g(a,b){for(var c=a.coordinates,d=0,e=c.length;d<e;d++)b.apply(null,c[d])}function h(a,b){for(var c=a.features,d=0,e=c.length;d<e;d++)j(c[d].geometry,b)}function i(a,b){j(a.geometry,b)}function j(a,b){a.type in o&&o[a.type](a,b)}function k(a,b){return b&&b.type in a?a[b.type](b):""}function l(){return 0}function m(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+ -2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}d3.geo={},d3.geo.azimuthal=function(){function a(a){var c=a[0]*n-f,g=a[1]*n,j=Math.cos(c),k=Math.sin(c),l=Math.cos(g),m=Math.sin(g),o=b==="stereographic"?1/(1+i*m+h*l*j):1,p=o*l*k,q=o*(i*l*j-h*m);return[d*p+e[0],d*q+e[1]]}var b="orthographic",c,d=200,e=[480,250],f,g,h,i;return a.invert=function(a){var c=(a[0]-e[0])/d,g=(a[1]-e[1])/d,j=Math.sqrt(c*c+g*g),k=b==="stereographic"?2*Math.atan(j):Math.asin(j),l=Math.sin(k),m=Math.cos(k);return[(f+Math.atan2(c*l,j*h*m+g*i*l))/n,Math.asin(m*i-g*l*h/j)/n]},a.mode=function(c){return arguments.length?(b=c+"",a):b},a.origin=function(b){return arguments.length?(c=b,f=c[0]*n,g=c[1]*n,h=Math.cos(g),i=Math.sin(g),a):c},a.scale=function(b){return arguments.length?(d=+b,a):d},a.translate=function(b){return arguments.length?(e=[+b[0],+b[1]],a):e},a.origin([0,0])},d3.geo.albers=function(){function a(){var a=n*d[0],e=n*d[1],f=n*c[1],k=Math.sin(a),l=Math.cos(a);return g=n*c[0],h=.5*(k+Math.sin(e)),i=l*l+2*h*k,j=Math.sqrt(i-2*h*Math.sin(f))/h,b}function b(a){var b=h*(n*a[0]-g),c=Math.sqrt(i-2*h*Math.sin(n*a[1]))/h;return[e*c*Math.sin(b)+f[0],e*(c*Math.cos(b)-j)+f[1]]}var c=[-98,38],d=[29.5,45.5],e=1e3,f=[480,250],g,h,i,j;return b.invert=function(a){var b=(a[0]-f[0])/e,c=(a[1]-f[1])/e,d=j+c,k=Math.atan2(b,d),l=Math.sqrt(b*b+d*d);return[(g+k/h)/n,Math.asin((i-l*l*h*h)/(2*h))/n]},b.origin=function(b){return arguments.length?(c=[+b[0],+b[1]],a()):c},b.parallels=function(b){return arguments.length?(d=[+b[0],+b[1]],a()):d},b.scale=function(a){return arguments.length?(e=+a,b):e},b.translate=function(a){return arguments.length?(f=[+a[0],+a[1]],b):f},a()},d3.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return(g>50?c:f<-140?d:g<21?e:b)(a)}var b=d3.geo.albers(),c=d3.geo.albers().origin([-160,60]).parallels([55,65]),d=d3.geo.albers().origin([-160,20]).parallels([8,18]),e=d3.geo.albers().origin([-60,10]).parallels([8,18]);return a.scale=function(f){return arguments.length?(b.scale(f),c.scale(f*.6),d.scale(f),e.scale(f*1.5),a.translate(b.translate())):b.scale()},a.translate=function(f){if(!arguments.length)return b.translate();var g=b.scale()/1e3,h=f[0],i=f[1];return b.translate(f),c.translate([h-400*g,i+170*g]),d.translate([h-190*g,i+200*g]),e.translate([h+580*g,i+430*g]),a},a.scale(b.scale())};var n=Math.PI/180;d3.geo.mercator=function(){function a(a){var d=a[0]/360,e=-(Math.log(Math.tan(Math.PI/4+a[1]*n/2))/n)/360;return[b*d+c[0],b*Math.max(-0.5,Math.min(.5,e))+c[1]]}var b=500,c=[480,250];return a.invert=function(a){var d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return[360*d,2*Math.atan(Math.exp(-360*e*n))/n-90]},a.scale=function(c){return arguments.length?(b=+c,a):b},a.translate=function(b){return arguments.length?(c=[+b[0],+b[1]],a):c},a},d3.geo.path=function(){function a(a){return Math.abs(d3.geom.polygon(a.map(h)).area())}function b(a){var b=d3.geom.polygon(a[0].map(h)),c=b.centroid(1),d=c[0],e=c[1],f=Math.abs(b.area()),g=0,i=a.length;while(++g<i)b=d3.geom.polygon(a[g].map(h)),c=b.centroid(1),d-=c[0],e-=c[1],f-=Math.abs(b.area());return[d,e,6*f]}function c(b){var c=a(b[0]),d=0,e=b.length;while(++d<e)c-=a(b[d]);return c}function d(a){return h(a).join(",")}function e(a,b){return typeof f=="function"&&(g=m(f.apply(this,arguments))),k(i,a)}var f=4.5,g=m(f),h=d3.geo.albersUsa(),i={FeatureCollection:function(a){var b=[],c=a.features,d=-1,e=c.length;while(++d<e)b.push(k(i,c[d].geometry));return b.join("")},Feature:function(a){return k(i,a.geometry)},Point:function(a){return"M"+d(a.coordinates)+g},MultiPoint:function(a){var b=[],c=a.coordinates,e=-1,f=c.length;while(++e<f)b.push("M",d(c[e]),g);return b.join("")},LineString:function(a){var b=["M"],c=a.coordinates,e=-1,f=c.length;while(++e<f)b.push(d(c[e]),"L");return b.pop(),b.join("")},MultiLineString:function(a){var b=[],c=a.coordinates,e=-1,f=c.length,g,h,i;while(++e<f){g=c[e],h=-1,i=g.length,b.push("M");while(++h<i)b.push(d(g[h]),"L");b.pop()}return b.join("")},Polygon:function(a){var b=[],c=a.coordinates,e=-1,f=c.length,g,h,i;while(++e<f){g=c[e],h=-1,i=g.length,b.push("M");while(++h<i)b.push(d(g[h]),"L");b[b.length-1]="Z"}return b.join("")},MultiPolygon:function(a){var b=[],c=a.coordinates,e=-1,f=c.length,g,h,i,j,k,l;while(++e<f){g=c[e],h=-1,i=g.length;while(++h<i){j=g[h],k=-1,l=j.length-1,b.push("M");while(++k<l)b.push(d(j[k]),"L");b[b.length-1]="Z"}}return b.join("")},GeometryCollection:function(a){var b=[],c=a.geometries,d=-1,e=c.length;while(++d<e)b.push(k(i,c[d]));return b.join("")}},j={FeatureCollection:function(a){var b=0,c=a.features,d=-1,e=c.length;while(++d<e)b+=k(j,c[d]);return b},Feature:function(a){return k(j,a.geometry)},Point:l,MultiPoint:l,LineString:l,MultiLineString:l,Polygon:function(a){return c(a.coordinates)},MultiPolygon:function(a){var b=0,d=a.coordinates,e=-1,f=d.length;while(++e<f)b+=c(d[e]);return b},GeometryCollection:function(a){var b=0,c=a.geometries,d=-1,e=c.length;while(++d<e)b+=k(j,c[d]);return b}},n={Feature:function(a){return k(n,a.geometry)},Polygon:function(a){var c=b(a.coordinates);return[c[0]/c[2],c[1]/c[2]]},MultiPolygon:function(a){var c=0,d=a.coordinates,e,f=0,g=0,h=0,i=-1,j=d.length;while(++i<j)e=b(d[i]),f+=e[0],g+=e[1],h+=e[2];return[f/h,g/h]}};return e.projection=function(a){return h=a,e},e.area=function(a){return k(j,a)},e.centroid=function(a){return k(n,a)},e.pointRadius=function(a){return typeof a=="function"?f=a:(f=+a,g=m(f)),e},e},d3.geo.bounds=function(a){var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity;return j(a,function(a,f){a<b&&(b=a),a>d&&(d=a),f<c&&(c=f),f>e&&(e=f)}),[[b,c],[d,e]]};var o={Feature:i,FeatureCollection:h,LineString:g,MultiLineString:f,MultiPoint:g,MultiPolygon:e,Point:d,Polygon:c};d3.geo.greatCircle=function(){function c(a,b){var c=d.call(this,a,b),g=e.call(this,a,b),h=c[0]*n,i=c[1]*n,j=g[0]*n,k=g[1]*n,l=Math.cos(h),m=Math.sin(h),o=Math.cos(i),p=Math.sin(i),q=Math.cos(j),r=Math.sin(j),s=Math.cos(k),t=Math.sin(k),a=Math.acos(p*t+o*s*Math.cos(j-h)),u=Math.sin(a),v=a/(f-1),w=-v,x=[],b=-1;while(++b<f){w+=v;var y=Math.sin(a-w)/u,z=Math.sin(w)/u,A=y*o*l+z*s*q,B=y*o*m+z*s*r,C=y*p+z*t;x[b]=[Math.atan2(B,A)/n,Math.atan2(C,Math.sqrt(A*A+B*B))/n]}return x}var d=b,e=a,f=100,g=6371;return c.source=function(a){return arguments.length?(d=a,c):d},c.target=function(a){return arguments.length?(e=a,c):e},c.n=function(a){return arguments.length?(f=+a,c):f},c.radius=function(a){return arguments.length?(g=+a,c):g},c.distance=function(a,b){var c=d.call(this,a,b),f=e.call(this,a,b),h=c[0]*n,i=c[1]*n,j=f[0]*n,k=f[1]*n,l=Math.sin((k-i)/2),m=Math.sin((j-h)/2),o=l*l+Math.cos(i)*Math.cos(k)*m*m;return g*2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))},c}})()