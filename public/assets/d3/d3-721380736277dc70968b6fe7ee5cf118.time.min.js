(function(){function a(a){return function(b){var c=a.length-1,d=a[c];while(!d[1](b))d=a[--c];return d[0](b)}}function b(a){return new Date(a)}function c(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function d(a,e,f){function g(b){return a(b)}return g.invert=function(c){return b(a.invert(c))},g.domain=function(c){return arguments.length?(a.domain(c),g):a.domain().map(b)},g.ticks=function(a,b){var d=c(g.domain());if(typeof a!="function"){var f=d[1]-d[0],h=f/a,i=d3.bisect(V,h,1,V.length-1);Math.log(h/V[i-1])<Math.log(V[i]/h)&&--i,a=e[i],b=a[1],a=a[0]}return a(d[0],d[1],b)},g.tickFormat=function(){return f},g.copy=function(){return d(a.copy(),e,f)},g.range=d3.rebind(g,a.range),g.rangeRound=d3.rebind(g,a.rangeRound),g.interpolate=d3.rebind(g,a.interpolate),g.clamp=d3.rebind(g,a.clamp),g}function e(a){a.setTime(a.getTime()+36e5)}function f(a){a.setTime(a.getTime()+6e4)}function g(a,b,c){return function(d,e,f){var g=a(d),h=[];g<d&&b(g);if(f>1)while(g<e){var i=new Date(+g);c(i)%f||h.push(i),b(g)}else while(g<e)h.push(new Date(+g)),b(g);return h}}function h(){this._=new Date(Date.UTC.apply(this,arguments))}function i(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=~~(Math.abs(b)/60),e=Math.abs(b)%60;return c+G(d)+G(e)}function j(a){var b=m(a);return G(~~(((a-b)/864e5+(b.getDay()+6)%7)/7))}function k(a){var b=m(a);return G(~~(((a-b)/864e5+b.getDay())/7))}function l(a){return H(1+~~((a-m(a))/864e5))}function m(a){return new F(a.getFullYear(),0,1)}function n(a,b,c){var d=U[b.substring(c,c+=2).toLowerCase()];return d==null?-1:(a.hour12pm=d,c)}function o(a,b,c){T.lastIndex=0;var d=T.exec(b.substring(c,c+2));return d?(a.setSeconds(+d[0]),c+=d[0].length):-1}function p(a,b,c){T.lastIndex=0;var d=T.exec(b.substring(c,c+2));return d?(a.setMinutes(+d[0]),c+=d[0].length):-1}function q(a,b,c){return a.hour12=!0,r(a,b,c)}function r(a,b,c){T.lastIndex=0;var d=T.exec(b.substring(c,c+2));return d?(a.setHours(+d[0]),c+=d[0].length):-1}function s(a,b,c){T.lastIndex=0;var d=T.exec(b.substring(c,c+2));return d?(a.setDate(+d[0]),c+=d[0].length):-1}function t(a,b,c){T.lastIndex=0;var d=T.exec(b.substring(c,c+2));return d?(a.setMonth(d[0]-1),c+=d[0].length):-1}function u(){return~~((new Date).getFullYear()/1e3)*1e3}function v(a,b,c){T.lastIndex=0;var d=T.exec(b.substring(c,c+2));return d?(a.setFullYear(u()+ +d[0]),c+=d[0].length):-1}function w(a,b,c){T.lastIndex=0;var d=T.exec(b.substring(c,c+4));return d?(a.setFullYear(d[0]),c+=d[0].length):-1}function x(a,b,c){return E(a,K.X.toString(),b,c)}function y(a,b,c){return E(a,K.x.toString(),b,c)}function z(a,b,c){return E(a,K.c.toString(),b,c)}function A(a,b,c){Q.lastIndex=0;var d=Q.exec(b.substring(c,c+12));return d?(a.setMonth(R[d[0].toLowerCase()]),c+=d[0].length):-1}function B(a,b,c){var d=P[b.substring(c,c+=3).toLowerCase()];return d==null?-1:(a.setMonth(d),c)}function C(a,b,c){N.lastIndex=0;var d=N.exec(b.substring(c,c+10));return d?c+=d[0].length:-1}function D(a,b,c){return b.substring(c,c+=3).toLowerCase()in M?c:-1}function E(a,b,c,d){var e,f,g=0,h=b.length,i=c.length;while(g<h){if(d>=i)return-1;e=b.charCodeAt(g++);if(e==37){f=L[b.charAt(g++)];if(!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}d3.time={};var F=Date;d3.time.format=function(a){function b(b){var d=[],e=-1,f=0,g,h;while(++e<c)a.charCodeAt(e)==37&&(d.push(a.substring(f,e),(h=K[g=a.charAt(++e)])?h(b):g),f=e+1);return d.push(a.substring(f,e)),d.join("")}var c=a.length;return b.parse=function(b){var c=new F(1900,0,1),d=E(c,a,b,0);if(d!=b.length)return null;if(c.hour12){var e=c.getHours()%12;c.setHours(c.hour12pm?e+12:e)}return delete c.hour12,delete c.hour12pm,c},b.toString=function(){return a},b};var G=d3.format("02d"),H=d3.format("03d"),I=d3.format("04d"),J=d3.format("2d"),K={a:function(a){return O[a.getDay()].substring(0,3)},A:function(a){return O[a.getDay()]},b:function(a){return S[a.getMonth()].substring(0,3)},B:function(a){return S[a.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(a){return G(a.getDate())},e:function(a){return J(a.getDate())},H:function(a){return G(a.getHours())},I:function(a){return G(a.getHours()%12||12)},j:l,m:function(a){return G(a.getMonth()+1)},M:function(a){return G(a.getMinutes())},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a){return G(a.getSeconds())},U:k,w:function(a){return a.getDay()},W:j,x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(a){return G(a.getFullYear()%100)},Y:function(a){return I(a.getFullYear()%1e4)},Z:i,"%":function(a){return"%"}},L={a:D,A:C,b:B,B:A,c:z,d:s,e:s,H:r,I:q,m:t,M:p,p:n,S:o,x:y,X:x,y:v,Y:w},M={sun:3,mon:3,tue:3,wed:3,thu:3,fri:3,sat:3},N=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/ig,O=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],P={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},Q=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/ig,R={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11},S=["January","February","March","April","May","June","July","August","September","October","November","December"],T=/\s*\d+/,U={am:0,pm:1};d3.time.format.utc=function(a){function b(a){var b=new h;return b._=a,c(b)}var c=d3.time.format(a);return b.parse=function(a){try{F=h;var b=c.parse(a);return b&&b._}finally{F=Date}},b.toString=c.toString,b},h.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.getTime()},setDate:function(a){this._.setUTCDate(a)},setDay:function(a){this._.setUTCDay(a)},setFullYear:function(a){this._.setUTCFullYear(a)},setHours:function(a){this._.setUTCHours(a)},setMilliseconds:function(a){this._.setUTCMilliseconds(a)},setMinutes:function(a){this._.setUTCMinutes(a)},setMonth:function(a){this._.setUTCMonth(a)},setSeconds:function(a){this._.setUTCSeconds(a)}},d3.time.format.iso=d3.time.format.utc("%Y-%m-%dT%H:%M:%SZ"),d3.time.second=function(a){return new Date(~~(a/1e3)*1e3)},d3.time.second.utc=d3.time.second,d3.time.seconds=g(d3.time.second,function(a){a.setTime(a.getTime()+1e3)},function(a){return a.getSeconds()}),d3.time.seconds.utc=d3.time.seconds,d3.time.minute=function(a){return new Date(~~(a/6e4)*6e4)},d3.time.minute.utc=d3.time.minute,d3.time.minutes=g(d3.time.minute,f,function(a){return a.getMinutes()}),d3.time.minutes.utc=g(d3.time.minute,f,function(a){return a.getUTCMinutes()}),d3.time.hour=function(a){var b=a.getTimezoneOffset()/60;return new Date((~~(a/36e5-b)+b)*36e5)},d3.time.hour.utc=function(a){return new Date(~~(a/36e5)*36e5)},d3.time.hours=g(d3.time.hour,e,function(a){return a.getHours()}),d3.time.hours.utc=g(d3.time.hour.utc,e,function(a){return a.getUTCHours()}),d3.time.day=function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},d3.time.day.utc=function(a){return new Date(~~(a/864e5)*864e5)},d3.time.days=g(d3.time.day,function(a){a.setDate(a.getDate()+1)},function(a){return a.getDate()-1}),d3.time.days.utc=g(d3.time.day.utc,function(a){a.setUTCDate(a.getUTCDate()+1)},function(a){return a.getUTCDate()-1}),d3.time.week=function(a){return(a=d3.time.day(a)).setDate(a.getDate()-a.getDay()),a},d3.time.week.utc=function(a){return(a=d3.time.day.utc(a)).setUTCDate(a.getUTCDate()-a.getUTCDay()),a},d3.time.weeks=g(d3.time.week,function(a){a.setDate(a.getDate()+7)},function(a){return~~((a-new Date(a.getFullYear(),0,1))/6048e5)}),d3.time.weeks.utc=g(d3.time.week.utc,function(a){a.setUTCDate(a.getUTCDate()+7)},function(a){return~~((a-Date.UTC(a.getUTCFullYear(),0,1))/6048e5)}),d3.time.month=function(a){return new Date(a.getFullYear(),a.getMonth(),1)},d3.time.month.utc=function(a){return new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),1))},d3.time.months=g(d3.time.month,function(a){a.setMonth(a.getMonth()+1)},function(a){return a.getMonth()}),d3.time.months.utc=g(d3.time.month.utc,function(a){a.setUTCMonth(a.getUTCMonth()+1)},function(a){return a.getUTCMonth()}),d3.time.year=function(a){return new Date(a.getFullYear(),0,1)},d3.time.year.utc=function(a){return new Date(Date.UTC(a.getUTCFullYear(),0,1))},d3.time.years=g(d3.time.year,function(a){a.setFullYear(a.getFullYear()+1)},function(a){return a.getFullYear()}),d3.time.years.utc=g(d3.time.year.utc,function(a){a.setUTCFullYear(a.getUTCFullYear()+1)},function(a){return a.getUTCFullYear()});var V=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,1728e6,7776e6,31536e6],W=[[d3.time.seconds,1],[d3.time.seconds,5],[d3.time.seconds,15],[d3.time.seconds,30],[d3.time.minutes,1],[d3.time.minutes,5],[d3.time.minutes,15],[d3.time.minutes,30],[d3.time.hours,1],[d3.time.hours,3],[d3.time.hours,6],[d3.time.hours,12],[d3.time.days,1],[d3.time.days,2],[d3.time.weeks,1],[d3.time.months,1],[d3.time.months,3],[d3.time.years,1]],X=[[d3.time.format("%Y"),function(a){return!0}],[d3.time.format("%B"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return a.getDate()!=1}],[d3.time.format("%a %d"),function(a){return a.getDay()&&a.getDate()!=1}],[d3.time.format("%I %p"),function(a){return a.getHours()}],[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()||a.getMilliseconds()}]],Y=a(X);d3.time.scale=function(){return d(d3.scale.linear(),W,Y)};var Z=[[d3.time.seconds.utc,1],[d3.time.seconds.utc,5],[d3.time.seconds.utc,15],[d3.time.seconds.utc,30],[d3.time.minutes.utc,1],[d3.time.minutes.utc,5],[d3.time.minutes.utc,15],[d3.time.minutes.utc,30],[d3.time.hours.utc,1],[d3.time.hours.utc,3],[d3.time.hours.utc,6],[d3.time.hours.utc,12],[d3.time.days.utc,1],[d3.time.days.utc,2],[d3.time.weeks.utc,1],[d3.time.months.utc,1],[d3.time.months.utc,3],[d3.time.years.utc,1]],$=[[d3.time.format.utc("%Y"),function(a){return!0}],[d3.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(a){return a.getUTCDate()!=1}],[d3.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&a.getUTCDate()!=1}],[d3.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(a){return a.getUTCSeconds()||a.getUTCMilliseconds()}]],_=a($);d3.time.scale.utc=function(){return d(d3.scale.linear(),Z,_)}})()