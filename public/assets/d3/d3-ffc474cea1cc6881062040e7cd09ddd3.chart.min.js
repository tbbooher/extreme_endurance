(function(){function a(a){return a.y}function b(a){return a.x}function c(a,b){var c=b.length-1;return b=b.slice().sort(d3.ascending),d3.range(a).map(function(d){return b[~~(d*c/a)]})}function d(a){return a[1]}function e(a){return a[0]}function f(a){var b=a(0);return function(c){return Math.abs(a(c)-b)}}function g(a){return function(b){return"translate("+a(b)+",0)"}}function h(a){return a.measures}function i(a){return a.markers}function j(a){return a.ranges}function k(a){return[d3.quantile(a,.25),d3.quantile(a,.5),d3.quantile(a,.75)]}function l(a){return[0,a.length-1]}d3.chart={},d3.chart.box=function(){function a(a){a.each(function(a,j){a=a.map(f).sort(d3.ascending);var k=d3.select(this),l=a.length,m=a[0],n=a[l-1],o=a.quartiles=h(a),p=g&&g.call(this,a,j),q=p&&p.map(function(b){return a[b]}),r=p?d3.range(0,p[0]).concat(d3.range(p[1]+1,l)):d3.range(l),s=d3.scale.linear().domain(e&&e.call(this,a,j)||[m,n]).range([c,0]),t=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(s.range());this.__chart__=s;var u=k.selectAll("line.center").data(q?[q]:[]);u.enter().insert("svg:line","rect").attr("class","center").attr("x1",b/2).attr("y1",function(a){return t(a[0])}).attr("x2",b/2).attr("y2",function(a){return t(a[1])}).style("opacity",1e-6).transition().duration(d).style("opacity",1).attr("y1",function(a){return s(a[0])}).attr("y2",function(a){return s(a[1])}),u.transition().duration(d).style("opacity",1).attr("y1",function(a){return s(a[0])}).attr("y2",function(a){return s(a[1])}),u.exit().transition().duration(d).style("opacity",1e-6).attr("y1",function(a){return s(a[0])}).attr("y2",function(a){return s(a[1])}).remove();var v=k.selectAll("rect.box").data([o]);v.enter().append("svg:rect").attr("class","box").attr("x",0).attr("y",function(a){return t(a[2])}).attr("width",b).attr("height",function(a){return t(a[0])-t(a[2])}).transition().duration(d).attr("y",function(a){return s(a[2])}).attr("height",function(a){return s(a[0])-s(a[2])}),v.transition().duration(d).attr("y",function(a){return s(a[2])}).attr("height",function(a){return s(a[0])-s(a[2])});var w=k.selectAll("line.median").data([o[1]]);w.enter().append("svg:line").attr("class","median").attr("x1",0).attr("y1",t).attr("x2",b).attr("y2",t).transition().duration(d).attr("y1",s).attr("y2",s),w.transition().duration(d).attr("y1",s).attr("y2",s);var x=k.selectAll("line.whisker").data(q||[]);x.enter().insert("svg:line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",t).attr("x2",b).attr("y2",t).style("opacity",1e-6).transition().duration(d).attr("y1",s).attr("y2",s).style("opacity",1),x.transition().duration(d).attr("y1",s).attr("y2",s).style("opacity",1),x.exit().transition().duration(d).attr("y1",s).attr("y2",s).style("opacity",1e-6).remove();var y=k.selectAll("circle.outlier").data(r,Number);y.enter().insert("svg:circle","text").attr("class","outlier").attr("r",5).attr("cx",b/2).attr("cy",function(b){return t(a[b])}).style("opacity",1e-6).transition().duration(d).attr("cy",function(b){return s(a[b])}).style("opacity",1),y.transition().duration(d).attr("cy",function(b){return s(a[b])}).style("opacity",1),y.exit().transition().duration(d).attr("cy",function(b){return s(a[b])}).style("opacity",1e-6).remove();var z=i||s.tickFormat(8),A=k.selectAll("text.box").data(o);A.enter().append("svg:text").attr("class","box").attr("dy",".3em").attr("dx",function(a,b){return b&1?6:-6}).attr("x",function(a,c){return c&1?b:0}).attr("y",t).attr("text-anchor",function(a,b){return b&1?"start":"end"}).text(z).transition().duration(d).attr("y",s),A.transition().duration(d).text(z).attr("y",s);var B=k.selectAll("text.whisker").data(q||[]);B.enter().append("svg:text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",b).attr("y",t).text(z).style("opacity",1e-6).transition().duration(d).attr("y",s).style("opacity",1),B.transition().duration(d).text(z).attr("y",s).style("opacity",1),B.exit().transition().duration(d).attr("y",s).style("opacity",1e-6).remove()}),d3.timer.flush()}var b=1,c=1,d=0,e=null,f=Number,g=l,h=k,i=null;return a.width=function(c){return arguments.length?(b=c,a):b},a.height=function(b){return arguments.length?(c=b,a):c},a.tickFormat=function(b){return arguments.length?(i=b,a):i},a.duration=function(b){return arguments.length?(d=b,a):d},a.domain=function(b){return arguments.length?(e=b==null?b:d3.functor(b),a):e},a.value=function(b){return arguments.length?(f=b,a):f},a.whiskers=function(b){return arguments.length?(g=b,a):g},a.quartiles=function(b){return arguments.length?(h=b,a):h},a},d3.chart.bullet=function(){function a(a){a.each(function(a,b){var h=e.call(this,a,b).slice().sort(d3.descending),i=k.call(this,a,b).slice().sort(d3.descending),j=l.call(this,a,b).slice().sort(d3.descending),p=d3.select(this),q=d3.scale.linear().domain([0,Math.max(h[0],i[0],j[0])]).range(c?[m,0]:[0,m]),r=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(q.range());this.__chart__=q;var s=f(r),t=f(q),u=p.selectAll("rect.range").data(h);u.enter().append("svg:rect").attr("class",function(a,b){return"range s"+b}).attr("width",s).attr("height",n).attr("x",c?r:0).transition().duration(d).attr("width",t).attr("x",c?q:0),u.transition().duration(d).attr("x",c?q:0).attr("width",t).attr("height",n);var v=p.selectAll("rect.measure").data(j);v.enter().append("svg:rect").attr("class",function(a,b){return"measure s"+b}).attr("width",s).attr("height",n/3).attr("x",c?r:0).attr("y",n/3).transition().duration(d).attr("width",t).attr("x",c?q:0),v.transition().duration(d).attr("width",t).attr("height",n/3).attr("x",c?q:0).attr("y",n/3);var w=p.selectAll("line.marker").data(i);w.enter().append("svg:line").attr("class","marker").attr("x1",r).attr("x2",r).attr("y1",n/6).attr("y2",n*5/6).transition().duration(d).attr("x1",q).attr("x2",q),w.transition().duration(d).attr("x1",q).attr("x2",q).attr("y1",n/6).attr("y2",n*5/6);var x=o||q.tickFormat(8),y=p.selectAll("g.tick").data(q.ticks(8),function(a){return this.textContent||x(a)}),z=y.enter().append("svg:g").attr("class","tick").attr("transform",g(r)).style("opacity",1e-6);z.append("svg:line").attr("y1",n).attr("y2",n*7/6),z.append("svg:text").attr("text-anchor","middle").attr("dy","1em").attr("y",n*7/6).text(x),z.transition().duration(d).attr("transform",g(q)).style("opacity",1);var A=y.transition().duration(d).attr("transform",g(q)).style("opacity",1);A.select("line").attr("y1",n).attr("y2",n*7/6),A.select("text").attr("y",n*7/6),y.exit().transition().duration(d).attr("transform",g(q)).style("opacity",1e-6).remove()}),d3.timer.flush()}var b="left",c=!1,d=0,e=j,k=i,l=h,m=380,n=30,o=null;return a.orient=function(d){return arguments.length?(b=d,c=b=="right"||b=="bottom",a):b},a.ranges=function(b){return arguments.length?(e=b,a):e},a.markers=function(b){return arguments.length?(k=b,a):k},a.measures=function(b){return arguments.length?(l=b,a):l},a.width=function(b){return arguments.length?(m=b,a):m},a.height=function(b){return arguments.length?(n=b,a):n},a.tickFormat=function(b){return arguments.length?(o=b,a):o},a.duration=function(b){return arguments.length?(d=b,a):d},a},d3.chart.horizon=function(){function a(a){a.each(function(a,d){var e=d3.select(this),o=2*b+1,p=Infinity,q=-Infinity,r=-Infinity,s,t,u,v=a.map(function(a,b){var c=g.call(this,a,b),d=h.call(this,a,b);return c<p&&(p=c),c>q&&(q=c),-d>r&&(r=-d),d>r&&(r=d),[c,d]}),w=d3.scale.linear().domain([p,q]).range([0,i]),x=d3.scale.linear().domain([0,r]).range([0,j*b]);this.__chart__?(s=this.__chart__.x,t=this.__chart__.y,u=this.__chart__.id):(s=d3.scale.linear().domain([0,Infinity]).range(w.range()),t=d3.scale.linear().domain([0,Infinity]).range(x.range()),u=++n);var y=e.selectAll("defs").data([v]),z=y.enter().append("svg:defs");z.append("svg:clipPath").attr("id","d3_chart_horizon_clip"+u).append("svg:rect").attr("width",i).attr("height",j),y.select("rect").transition().duration(k).attr("width",i).attr("height",j),z.append("svg:path").attr("id","d3_chart_horizon_path"+u).attr("d",m.interpolate(f).x(function(a){return s(a[0])}).y0(j*b).y1(function(a){return j*b-t(a[1])})).transition().duration(k).attr("d",m.x(function(a){return w(a[0])}).y1(function(a){return j*b-x(a[1])})),y.select("path").transition().duration(k).attr("d",m),e.selectAll("g").data([null]).enter().append("svg:g").attr("clip-path","url(#d3_chart_horizon_clip"+u+")");var A=c=="offset"?function(a){return"translate(0,"+(a+(a<0)-b)*j+")"}:function(a){return(a<0?"scale(1,-1)":"")+"translate(0,"+(a-b)*j+")"},B=e.select("g").selectAll("use").data(d3.range(-1,-b-1,-1).concat(d3.range(1,b+1)),Number);B.enter().append("svg:use").attr("xlink:href","#d3_chart_horizon_path"+u).attr("transform",function(a){return A(a+(a>0?1:-1))}).style("fill",l).transition().duration(k).attr("transform",A),B.transition().duration(k).attr("transform",A).style("fill",l),B.exit().transition().duration(k).attr("transform",A).remove(),this.__chart__={x:w,y:x,id:u}}),d3.timer.flush()}var b=1,c="offset",f="linear",g=e,h=d,i=960,j=40,k=0,l=d3.scale.linear().domain([-1,0,1]).range(["#d62728","#fff","#1f77b4"]);return a.duration=function(b){return arguments.length?(k=+b,a):k},a.bands=function(c){return arguments.length?(b=+c,l.domain([-b,0,b]),a):b},a.mode=function(b){return arguments.length?(c=b+"",a):c},a.colors=function(b){return arguments.length?(l.range(b),a):l.range()},a.interpolate=function(b){return arguments.length?(f=b+"",a):f},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(h=b,a):h},a.width=function(b){return arguments.length?(i=+b,a):i},a.height=function(b){return arguments.length?(j=+b,a):j},a};var m=d3.svg.area(),n=0;d3.chart.qq=function(){function d(a){a.each(function(a,b){var d=d3.select(this),m=c(j,k.call(this,a,b)),n=c(j,l.call(this,a,b)),o=h&&h.call(this,a,b)||[d3.min(m),d3.max(m)],p=h&&h.call(this,a,b)||[d3.min(n),d3.max(n)],q,r,s=d3.scale.linear().domain(o).range([0,e]),t=d3.scale.linear().domain(p).range([f,0]);this.__chart__?(q=this.__chart__.x,r=this.__chart__.y):(q=d3.scale.linear().domain([0,Infinity]).range(s.range()),r=d3.scale.linear().domain([0,Infinity]).range(t.range())),this.__chart__={x:s,y:t};var u=d.selectAll("line.diagonal").data([null]);u.enter().append("svg:line").attr("class","diagonal").attr("x1",s(p[0])).attr("y1",t(o[0])).attr("x2",s(p[1])).attr("y2",t(o[1])),u.transition().duration(g).attr("x1",s(p[0])).attr("y1",t(o[0])).attr("x2",s(p[1])).attr("y2",t(o[1]));var v=d.selectAll("circle").data(d3.range(j).map(function(a){return{x:m[a],y:n[a]}}));v.enter().append("svg:circle").attr("class","quantile").attr("r",4.5).attr("cx",function(a){return q(a.x)}).attr("cy",function(a){return r(a.y)}).style("opacity",1e-6).transition().duration(g).attr("cx",function(a){return s(a.x)}).attr("cy",function(a){return t(a.y)}).style("opacity",1),v.transition().duration(g).attr("cx",function(a){return s(a.x)}).attr("cy",function(a){return t(a.y)}).style("opacity",1),v.exit().transition().duration(g).attr("cx",function(a){return s(a.x)}).attr("cy",function(a){return t(a.y)}).style("opacity",1e-6).remove();var w=i||s.tickFormat(4),x=i||t.tickFormat(4),y=function(a){return"translate("+s(a)+","+f+")"},z=function(a){return"translate(0,"+t(a)+")"},A=d.selectAll("g.x.tick").data(s.ticks(4),function(a){return this.textContent||w(a)}),B=A.enter().append("svg:g").attr("class","x tick").attr("transform",function(a){return"translate("+q(a)+","+f+")"}).style("opacity",1e-6);B.append("svg:line").attr("y1",0).attr("y2",-6),B.append("svg:text").attr("text-anchor","middle").attr("dy","1em").text(w),B.transition().duration(g).attr("transform",y).style("opacity",1),A.transition().duration(g).attr("transform",y).style("opacity",1),A.exit().transition().duration(g).attr("transform",y).style("opacity",1e-6).remove();var C=d.selectAll("g.y.tick").data(t.ticks(4),function(a){return this.textContent||x(a)}),D=C.enter().append("svg:g").attr("class","y tick").attr("transform",function(a){return"translate(0,"+r(a)+")"}).style("opacity",1e-6);D.append("svg:line").attr("x1",0).attr("x2",6),D.append("svg:text").attr("text-anchor","end").attr("dx","-.5em").attr("dy",".3em").text(x),D.transition().duration(g).attr("transform",z).style("opacity",1),C.transition().duration(g).attr("transform",z).style("opacity",1),C.exit().transition().duration(g).attr("transform",z).style("opacity",1e-6).remove()})}var e=1,f=1,g=0,h=null,i=null,j=100,k=b,l=a;return d.width=function(a){return arguments.length?(e=a,d):e},d.height=function(a){return arguments.length?(f=a,d):f},d.duration=function(a){return arguments.length?(g=a,d):g},d.domain=function(a){return arguments.length?(h=a==null?a:d3.functor(a),d):h},d.count=function(a){return arguments.length?(j=a,d):j},d.x=function(a){return arguments.length?(k=a,d):k},d.y=function(a){return arguments.length?(l=a,d):l},d.tickFormat=function(a){return arguments.length?(i=a,d):i},d}})()